extends ../base.pug


block content

    div(data-id = video._id).videoContainer
        video(src="/"+video.fileUrl controls)

        div
            button.play Play
            button.mute Mute
            input(type="range" step="0.1" value= 0.5 min=0 max=1).volume
            div
                span.currentTime 00:00:00
                span  / 
                span.totalTime 00:00:00

                input(type="range" step = "1" min = "0" value= 0).timeLine
            button.fullScreen FullScreen
            
      

    
    div 
        h2=video.description
        a(href=`/users/${video.owner._id}`) 
            small=video.owner.name 
    div
        small #{video.meta.views} #{video.meta.views <= 1 ?"view":  "views"} | 
        small=video.createdAt
    br

    if String(video.owner._id) === String(loggedInUser._id)
        a(href=`${video.id}/edit`) Edit video &rarr; 
        br
        a(href=`${video.id}/delete`) Delete video &rarr; 

    div.video__comments
        div.video__comments-column
            ul 
                each comment in video.comments.reverse()
                    li(id= comment._id)
                        div=comment.text 
                        if (String(video.owner._id) === String(loggedInUser._id) ) || (String(comment.owner._id)=== String(loggedInUser._id))
                            button ❌
        if loggedIn
            div.video__comments-column
                form.comment__form#comment__form
                    textarea(cols="30", rows="10", placeholder = "Comment....")
                    input(type="submit" value="Comment").comment__form-submit

        





block scripts 
    script(src="/assets/js/videoPlayer.js")   
    if loggedIn
        script(src="/assets/js/commentSection.js")   